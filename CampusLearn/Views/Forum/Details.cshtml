@model CampusLearn.Models.ForumTopic

@{
    ViewData["Title"] = "Forum Topic";
}

<style>
    .topic-container {
        max-width: 850px;
        margin: 40px auto;
        padding: 20px;
        font-family: 'Segoe UI', sans-serif;
    }

    .topic-card {
        background: #f8f8ff;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    }

    .topic-title {
        color: #6a0dad;
        font-weight: bold;
        font-size: 1.4em;
        margin-bottom: 10px;
    }

    .topic-subject {
        color: #555;
        margin-bottom: 10px;
    }

    .topic-description {
        font-size: 1em;
        color: #333;
        margin-bottom: 20px;
    }

    .reply-card {
        background-color: #fff;
        border-radius: 8px;
        padding: 12px 16px;
        margin-bottom: 10px;
        border-left: 4px solid #6a0dad;
        box-shadow: 0 1px 4px rgba(0,0,0,0.05);
    }

    .reply-author {
        font-weight: 600;
        color: #6a0dad;
    }

    .reply-meta {
        font-size: 0.85em;
        color: #888;
    }

    .reply-form {
        margin-top: 30px;
    }

        .reply-form textarea {
            width: 100%;
            height: 90px;
            border-radius: 8px;
            border: 1px solid #ccc;
            padding: 10px;
            font-size: 0.95em;
            resize: none;
        }

        .reply-form button {
            background-color: #6a0dad;
            color: white;
            padding: 8px 14px;
            border: none;
            border-radius: 6px;
            margin-top: 8px;
            cursor: pointer;
            transition: background 0.2s ease;
        }

            .reply-form button:hover {
                background-color: #580b9e;
            }
</style>

<div class="topic-container">
    <div class="topic-card">
        <div class="topic-title">@Model.Title</div>
        <div class="topic-subject"><strong>Subject:</strong> @Model.Subject</div>
        <div class="topic-description">@Model.Description</div>
        <div><strong>Contributions:</strong> @Model.Contributions</div>
        <div><strong>Progress:</strong> @Model.Progress</div>
    </div>

    <h4 class="mt-4">Replies</h4>

    @if (Model.Replies != null && Model.Replies.Any())
    {
        foreach (var reply in Model.Replies.OrderBy(r => r.PostedAt))
        {
            <div class="reply-card">
                <div class="reply-author">@reply.Author</div>
                <div class="reply-meta">@reply.PostedAt.ToLocalTime().ToString("g")</div>
                <p>@reply.Message</p>
            </div>
        }
    }
    else
    {
        <p>No replies yet — be the first to contribute!</p>
    }

    <div class="reply-form">
        <form asp-action="AddReply" asp-controller="Forum" method="post">
            @Html.AntiForgeryToken()
            <input type="hidden" name="id" value="@Model.Id" />
            <textarea name="message" placeholder="Write your reply..." required></textarea>
            <button type="submit">Post Reply</button>
        </form>
    </div>
</div>